CREATE TABLE Osoba (
    Ime VARCHAR(50) NOT NULL,
    SrednjeSlovo VARCHAR(1),
    Prezime VARCHAR(50) NOT NULL,
    JMBG CHAR(13) PRIMARY KEY,
    BrojTelefona VARCHAR(20) UNIQUE,
    Adresa VARCHAR(100) NOT NULL
);

CREATE TABLE Vozac (
    BrVozackeDozvole CHAR(9) NOT NULL,
    Kategorija VARCHAR(10) NOT NULL,
    JMBG CHAR(13) PRIMARY KEY NOT NULL
);

CREATE TABLE AdministrativnoOsoblje (
    StrucnaSprema VARCHAR(50) NOT NULL,
    JMBG CHAR(13) PRIMARY KEY
);

CREATE TABLE Vozilo (
    Marka VARCHAR(50) NOT NULL,
    Tip VARCHAR(50) NOT NULL,
    ID INT PRIMARY KEY
);

CREATE TABLE SopstvenoVozilo (
    Boja VARCHAR(20) NOT NULL,
    ID INT PRIMARY KEY
);

CREATE TABLE VoziloTaksiSluzbe (
    GodinaProizvodnje INT NOT NULL,
    DatumIstekaRegistracije DATE NOT NULL,
    RegistarskaOznaka CHAR(9) NOT NULL,
    ID INT PRIMARY KEY
);

CREATE TABLE Musterija (
    ID INT PRIMARY KEY,
    Adresa VARCHAR(100) NOT NULL,
    BrojTelefona1 VARCHAR(20) UNIQUE NOT NULL,
    BrojTelefona2 VARCHAR(20),
    BrojTelefona3 VARCHAR(20) 
);

CREATE TABLE Voznja (
    ID INT PRIMARY KEY,
    VremePocetkaVoznje DATE NOT NULL,
    VremeKrajaVoznje DATE NOT NULL,
    PocetnaStanica VARCHAR(100) NOT NULL,
    KrajnjaStanica VARCHAR(100) NOT NULL,
    JMBGVozaca CHAR(13) REFERENCES Vozac(JMBG),
    VremePrimanjaPoziva DATE NOT NULL,
    JMBGAdm CHAR(13) REFERENCES AdministrativnoOsoblje(JMBG),
    IDMusterije INT REFERENCES Musterija(ID)
);

CREATE TABLE Koristi (
    JMBGVozaca CHAR(13),
    IDVozila INT NOT NULL ,
    DatumOd DATE NOT NULL,
    DatumDo DATE NOT NULL,
    PRIMARY KEY (JMBGVozaca, IDVozila)
);

ALTER TABLE "VOZAC" ADD CONSTRAINT "VOZAC_CONSTRAINT" CHECK (Kategorija IN('A','B','C','D','E')) ENABLE;

ALTER TABLE "ADMINISTRATIVNOOSOBLJE" ADD CONSTRAINT "ADM_CONSTRAINT" CHECK (StrucnaSprema IN('SSS','VÅ S','VSS')) ENABLE;

ALTER TABLE "VOZAC" ADD CONSTRAINT "Vozac_FK" FOREIGN KEY ("JMBG") REFERENCES "OSOBA" ("JMBG") ENABLE;

ALTER TABLE "ADMINISTRATIVNOOSOBLJE" ADD CONSTRAINT "ADM_FK" FOREIGN KEY ("JMBG") REFERENCES "OSOBA" ("JMBG") ENABLE;

ALTER TABLE "SOPSTVENOVOZILO" ADD CONSTRAINT "SOPVOZ_FK" FOREIGN KEY ("ID") REFERENCES "VOZILO" ("ID") ENABLE;

ALTER TABLE "VOZILOTAKSISLUZBE" ADD CONSTRAINT "VOZTS_FK" FOREIGN KEY ("ID") REFERENCES "VOZILO" ("ID") ENABLE;

